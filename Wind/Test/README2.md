# 风电场发电功率预测系统

## 大赛背景

本项目基于“第三届世界科学智能大赛——新能源发电功率预测”赛道任务，旨在推动新能源功率预测技术创新，提升新能源场站的发电功率预测能力。大赛由上海科学智能研究院、复旦大学等主办，聚焦风电与光伏场站的未来24小时逐15分钟发电功率预测。详细赛题背景、规则和数据说明请参考[官方文档](http://competition.sais.com.cn/competitionDetail/532315/format)。

## 项目概述

本项目是一个基于气象数据的风电场发电功率预测系统，使用LightGBM模型进行预测。系统可处理多个风电场站点的数据，从多个气象数据源获取信息，并生成未来24小时（96个15分钟时间点）的发电功率预测。

## 项目结构
```
├── config.py              # 配置信息
├── data_loader.py         # 数据加载相关函数
├── feature_engineering.py # 特征工程相关函数
├── prediction.py          # 预测相关函数
├── utils.py               # 工具函数
├── main.py                # 主程序入口
└── README.md              # 项目说明文档
```

## 赛题任务与数据

### 任务目标

根据历史发电功率数据和对应时段多类别气象预测数据，实现次日零时起到未来24小时逐15分钟级新能源场站发电功率预测。

### 输入数据

- 气象数据：存储在`NWP_DATA_PATH`指定的路径下
  - 格式：NetCDF (.nc)文件
  - 组织方式：按站点ID和数据源（NWP_1, NWP_2, NWP_3）分类存储
  - 文件命名：YYYYMMDD.nc
  - 每个文件为第二天0点起24小时的气象预报，时间间隔1小时

#### 气象变量说明

| 变量   | 描述              | 单位         |
| ------ | ----------------- | ------------ |
| u100   | 100米高度纬向风   | m/s          |
| v100   | 100米高度经向风   | m/s          |
| t2m    | 2米气温           | K            |
| tp     | 总降水量          | m            |
| tcc    | 总云量            | (0 - 1)      |
| sp     | 地面气压          | Pa           |
| poai   | 光伏面板辐照度    | W/m²         |
| ghi    | 水平面总辐照度    | W/m²         |
| msl    | 海平面气压（NWP_2）| Pa          |

### 模型文件

- 存储在`MODEL_PATH`指定的路径下
- 文件命名：lightgbm_station_{station_id}.pkl
- 内容：为每个15分钟时间点训练的LightGBM模型

### 输出数据

- 存储在`OUTPUT_PATH`指定的路径下
- 文件命名：output{station_id}.csv
- 内容：包含时间和预测功率的CSV文件，格式如下：

|                 | power       |
| --------------- | ----------- |
| 2024/12/1 00:00 | 28.76940995 |
| 2024/12/1 00:15 | 28.77233067 |
| ...             | ...         |

## 项目模块说明

### config.py

包含项目的全局配置信息，如数据路径、模型路径、输出路径等。

### data_loader.py

负责加载和处理气象数据，包括：
- 从不同来源加载气象数据文件
- 提取中心网格点数据
- 合并多个来源的气象数据
- 获取测试集日期范围

### feature_engineering.py

特征工程相关函数，包括时间特征、数值特征处理等。

### prediction.py

负责模型预测功能，包括：
- 加载训练好的LightGBM模型
- 使用模型进行预测
- 保存预测结果

### utils.py

提供辅助功能，包括日志格式化和打印、警告处理等。

### main.py

程序入口，协调各模块完成风电场发电功率预测任务。

## 使用方法

1. 安装依赖库：
```bash
   pip install pandas numpy xarray lightgbm joblib
```

2. 配置数据路径：
   - 在`config.py`中设置正确的数据路径、模型路径和输出路径

3. 运行预测：
```bash
   python main.py
```

4. 查看结果：
   - 预测结果将保存在`OUTPUT_PATH`指定的路径下
   - 日志信息将在控制台输出

## 结果提交规范

- 每个场站输出一个csv文件，文件名如`output1.csv`，内容为96×D行（D为预测天数），index为北京时间时间戳，列名为`power`
- 所有输出文件压缩为`output.zip`提交

## 评测指标

- 每日预测准确率（CR）：对每个场站每天单独计算
- 场站预测准确率（Cf）：所有预测日的精度平均值
- 最终准确率（C）：所有场站精度的平均值

## 注意事项

- 确保气象数据文件格式正确，且按照指定的目录结构组织
- 确保模型文件已正确训练并保存
- 预测结果中的功率值已归一化到[0,1]范围
- 不允许使用外部数据或公开预训练模型

---

如需了解详细赛题背景、规则、数据结构和评测方式，请参阅[官方文档](http://competition.sais.com.cn/competitionDetail/532315/format)